# ZC Charts Plugin

A WordPress plugin for visualizing economic indicators managed by the ZC DMT plugin.

## Description

ZC Charts is a pure visualization tool that works in conjunction with the ZC DMT (Data Management Tool) plugin. It renders charts for economic indicators using either Chart.js or Highcharts libraries. The plugin requires a valid API key generated by the ZC DMT plugin to function.

## Requirements

- WordPress 5.0 or higher
- PHP 7.4 or higher
- ZC DMT plugin must be installed and activated first

## Installation

1. Upload the `zc-charts` folder to the `/wp-content/plugins/` directory
2. Activate the plugin through the 'Plugins' menu in WordPress
3. Go to Settings > ZC Charts to configure the API key and default chart library

## Configuration

### Initial Setup

1. **Activate the Plugin**: After activation, the plugin will add a "ZC Charts" menu item under Settings.
2. **Configure Settings**: Go to Settings > ZC Charts to configure the plugin.
3. **Select API Key**: Choose an API key generated by the ZC DMT plugin.
4. **Choose Default Chart Library**: Select between Chart.js (free) or Highcharts (commercial license required for production).
5. **Save Changes**: Click "Save Changes" to apply the settings.

### API Key Management

- The API key is used to authenticate requests to the ZC DMT plugin's REST API.
- API keys are generated and managed within the ZC DMT plugin.
- Select the appropriate API key from the dropdown in the ZC Charts settings.

### Chart Library Selection

- **Chart.js**: A free, open-source charting library with good performance for most use cases.
- **Highcharts**: A feature-rich commercial charting library with advanced interactivity (requires commercial license for production use).

## Usage

### Shortcodes

The plugin provides two shortcodes for displaying charts:

#### Dynamic Chart
[z_chart_dynamic id="indicator-slug" library="chartjs" timeframe="1y" height="400px"]

#### Static Chart
[z_chart_static id="indicator-slug" library="highcharts"]

### Parameters

- `id` (required): The slug of the indicator to display (configured in ZC DMT).
- `library` (optional): Chart library to use (chartjs or highcharts). Defaults to the setting in plugin options.
- `timeframe` (optional): Time period to display (3m, 6m, 1y, 2y, 3y, 5y, 10y, 15y, 20y, 25y, all). Only for dynamic charts.
- `height` (optional): Height of the chart container (e.g., 400px, 50vh). Only for dynamic charts.

### Examples

Display GDP data with Chart.js:
[z_chart_dynamic id="gdp-us" library="chartjs" timeframe="5y" height="400px"]

Display unemployment rate with Highcharts:
[z_chart_static id="unemployment-rate-us" library="highcharts"]

### Fallback Mechanism

If live data fetching fails, the plugin automatically attempts to retrieve data from the latest backup stored in Google Drive (if enabled in ZC DMT).

1. When a chart shortcode is rendered, the plugin first tries to fetch live data from the ZC DMT plugin.
2. If the live data fetch fails (network error, timeout, etc.), the plugin makes a second request to the ZC DMT plugin's backup endpoint.
3. If backup data is available, it is used to render the chart.
4. If both live and backup data are unavailable, an error message is displayed.

### Error Handling

The plugin displays styled error messages for various scenarios:

- **Invalid API Key**: "Unauthorized access. Check API key configuration."
- **Data Not Found**: "Requested indicator data not available."
- **Network Error**: "Unable to load data. Check connection."
- **Total Failure**: "Live and backup data unavailable."

## Integration with ZC DMT

The ZC Charts plugin is designed to work exclusively with the ZC DMT plugin:

1. **Data Source**: All chart data originates from indicators configured in the ZC DMT plugin.
2. **Authentication**: Charts are rendered only with a valid API key generated by ZC DMT.
3. **Fallback**: Backup data is retrieved through ZC DMT's Google Drive integration.
4. **REST API**: Communication between the plugins happens via WordPress's REST API.

## Chart Libraries

### Chart.js

- Lightweight (11KB gzipped)
- Responsive and mobile-friendly
- Good performance with moderate datasets
- Free and open-source

### Highcharts

- Feature-rich and highly configurable
- Excellent interactivity and mobile responsiveness
- Trusted by major financial institutions
- Commercial license required for production use

## Security

The plugin implements a secure API key system:

1. API keys are generated and managed by the ZC DMT plugin
2. All chart requests require a valid API key
3. Invalid or missing keys result in error messages instead of chart data
4. Unauthorized access attempts are logged by the ZC DMT plugin

## Styling and Responsiveness

- Charts are responsive by default and will adapt to their container size
- Container height can be controlled via the `height` parameter in dynamic charts
- Default styling is minimal to allow easy customization via theme CSS
- Dark mode support is included for compatible browsers

## Performance Considerations

- Chart libraries are loaded only when a shortcode is present on the page
- Data is fetched via REST API calls to the ZC DMT plugin
- Caching mechanisms in ZC DMT help reduce repeated data fetching
- Large datasets are handled efficiently by the chosen chart library

## Troubleshooting

### Charts Not Displaying

1. Ensure the ZC DMT plugin is installed and activated
2. Verify that an API key is selected in Settings > ZC Charts
3. Check that the indicator slug in the shortcode is correct
4. Confirm the API key is valid and active in the ZC DMT plugin

### Error Messages

- **"Indicator ID is required"**: Make sure the `id` parameter is included in the shortcode
- **"API key not configured"**: Go to Settings > ZC Charts and select an API key
- **"Invalid API key"**: Check that the selected API key is valid in ZC DMT
- **"Requested indicator data not available"**: Verify the indicator exists and has data in ZC DMT

## Changelog

### 1.0.0
- Initial release
- Support for Chart.js and Highcharts libraries
- Dynamic and static chart shortcodes
- API key validation system
- Fallback to backup data
- Settings page for configuration

## Frequently Asked Questions

### Why is the chart not displaying?

Ensure that:
1. The ZC DMT plugin is installed and activated
2. An API key is configured in Settings > ZC Charts
3. The indicator slug in the shortcode is correct
4. The API key is valid and active in the ZC DMT plugin

### Can I use this plugin without ZC DMT?

No, this plugin is designed specifically to work with the ZC DMT plugin and cannot function independently.

### How do I create an API key?

API keys are generated in the ZC DMT plugin under the Settings page.

### Which chart library should I use?

- Use Chart.js for a lightweight, free solution
- Use Highcharts for advanced features (requires commercial license)

### How does the fallback mechanism work?

If live data fetching fails, the plugin automatically attempts to retrieve data from the latest backup stored in Google Drive (if enabled in ZC DMT).

## Support

For support, please contact Zestra Capital or check the documentation.

## License

GPL v2 or later